
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://brace2.github.io/OpenSeesRT/developer/extending/4012-Add%20a%20New%20Element%20C%2B%2B/">
      
      <link rel="icon" href="../../../images/favicon.png">
      <meta name="generator" content="mkdocs-, mkdocs-material-8.2.13">
    
    
      
        <title>Add a New Element C++ - OpenSeesRT</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e411adfe.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=serif:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"serif";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../math.css">
    
      <link rel="stylesheet" href="../../../particle.css">
    
      <link rel="stylesheet" href="../../../grid.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OpenSeesRT" class="md-header__button md-logo" aria-label="OpenSeesRT" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenSeesRT
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Add a New Element C++

            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../library/analysis/DirectIntegration/" class="md-tabs__link">
        Library
      </a>
    </li>
  

  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OpenSeesRT" class="md-nav__button md-logo" aria-label="OpenSeesRT" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    OpenSeesRT
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1">
          Library
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Library" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Library
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1" type="checkbox" id="__nav_1_1" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_1">
          Analysis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Analysis" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          Analysis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_1" type="checkbox" id="__nav_1_1_1" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../library/analysis/DirectIntegration/">DirectIntegrationAnalysis</a>
          
            <label for="__nav_1_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="DirectIntegrationAnalysis" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_1">
          <span class="md-nav__icon md-icon"></span>
          DirectIntegrationAnalysis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/DirectIntegration/231-Explicit%20Difference/" class="md-nav__link">
        Explicit Difference

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/DirectIntegration/277-Generalized%20Alpha%20Method/" class="md-nav__link">
        Generalized Alpha Method

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/DirectIntegration/326-Hilber-Hughes-Taylor%20Method/" class="md-nav__link">
        Hilber-Hughes-Taylor

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/DirectIntegration/416-Newmark%20Method/" class="md-nav__link">
        Newmark Method

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/DirectIntegration/675-TRBDF2/" class="md-nav__link">
        TRBDF2

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/DirectIntegration/81-Central%20Difference/" class="md-nav__link">
        Central Difference

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/DirectIntegration/_implementation/" class="md-nav__link">
        
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_2" type="checkbox" id="__nav_1_1_2" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_1_2">
          EigenAnalysis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="EigenAnalysis" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_2">
          <span class="md-nav__icon md-icon"></span>
          EigenAnalysis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/Eigen_Analysis/ArpackSolver/" class="md-nav__link">
        ArpackSolver

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/Eigen_Analysis/EigenAlgorithm/" class="md-nav__link">
        
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/Eigen_Analysis/FrequencyAlgo/" class="md-nav__link">
        FrequencyAlgo

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/Eigen_Analysis/StandardEigenAlgo/" class="md-nav__link">
        StandardEigenAlgo

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_3" type="checkbox" id="__nav_1_1_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../library/analysis/">StaticAnalysis</a>
          
            <label for="__nav_1_1_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="StaticAnalysis" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_3">
          <span class="md-nav__icon md-icon"></span>
          StaticAnalysis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/StaticAnalysis/154-Displacement%20Control/" class="md-nav__link">
        Displacement Control

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/StaticAnalysis/24-Arc-Length%20Control/" class="md-nav__link">
        Arc-Length Control

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/StaticAnalysis/372-Load%20Control/" class="md-nav__link">
        Load Control

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/StaticAnalysis/387-Minimum%20Unbalanced%20Displacement%20Norm/" class="md-nav__link">
        Minimum Unbalanced Displacement Norm

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/StaticAnalysis/EQPath/" class="md-nav__link">
        EQPath

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/StaticAnalysis/HSConstraint/" class="md-nav__link">
        HSConstraint

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/StaticAnalysis/" class="md-nav__link">
        StaticAnalysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/StaticAnalysis/LoadPath/" class="md-nav__link">
        LoadPath

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/StaticAnalysis/ParkLMS3/" class="md-nav__link">
        ParkLMS3

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/analysis/StaticAnalysis/StagedLoadControl/" class="md-nav__link">
        StagedLoadControl

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2">
          Modeling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modeling" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          Modeling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_1" type="checkbox" id="__nav_1_2_1" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_1">
          Uniaxial Material
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Uniaxial Material" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_1">
          <span class="md-nav__icon md-icon"></span>
          Uniaxial Material
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_1_1" type="checkbox" id="__nav_1_2_1_1" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_1_1">
          Elastic
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Elastic" data-md-level="4">
        <label class="md-nav__title" for="__nav_1_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          Elastic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/elastic/181-ElasticMultiLinear/" class="md-nav__link">
        ElasticMultiLinear

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/elastic/195-Elastic%20Uniaxial/" class="md-nav__link">
        Elastic

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/elastic/180-ElasticBilin/" class="md-nav__link">
        ElasticBilin

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_1_2" type="checkbox" id="__nav_1_2_1_2" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_1_2">
          Generic
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Generic" data-md-level="4">
        <label class="md-nav__title" for="__nav_1_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          Generic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/bouc/64-BoucWen/" class="md-nav__link">
        BoucWen

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/generic/322-Hardening/" class="md-nav__link">
        Hardening

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/generic/179-Elastic-Perfectly%20Plastic/" class="md-nav__link">
        Elastic-Perfectly Plastic

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/generic/404-MultiLinear/" class="md-nav__link">
        MultiLinear

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_1_3" type="checkbox" id="__nav_1_2_1_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_1_3">
          Metallic
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Metallic" data-md-level="4">
        <label class="md-nav__title" for="__nav_1_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          Metallic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/metallic/666-Steel02/" class="md-nav__link">
        Steel02

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/metallic/668-SteelMPF/" class="md-nav__link">
        SteelMPF

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/metallic/587-Reinforcing%20Steel/" class="md-nav__link">
        ReinforcingSteel

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/metallic/667-Steel4/" class="md-nav__link">
        Steel4

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/metallic/158-DoddRestrepo/" class="md-nav__link">
        DoddRestrepo

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/metallic/730-UVCuniaxial/" class="md-nav__link">
        UVCuniaxial

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/metallic/569-RambergOsgoodSteel/" class="md-nav__link">
        RambergOsgoodSteel

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_1_4" type="checkbox" id="__nav_1_2_1_4" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_1_4">
          Concrete
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Concrete" data-md-level="4">
        <label class="md-nav__title" for="__nav_1_2_1_4">
          <span class="md-nav__icon md-icon"></span>
          Concrete
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/concrete/97-ConfinedConcrete01/" class="md-nav__link">
        ConfinedConcrete01

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/concrete/94-ConcreteCM/" class="md-nav__link">
        ConcreteCM

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/concrete/91-Concrete04/" class="md-nav__link">
        Concrete04
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/concrete/90-Concrete02/" class="md-nav__link">
        Concrete02
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/concrete/92-Concrete06/" class="md-nav__link">
        Concrete06

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/concrete/Concrete02IS/" class="md-nav__link">
        Concrete02IS

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_1_5" type="checkbox" id="__nav_1_2_1_5" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_1_5">
          Geotechnical
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Geotechnical" data-md-level="4">
        <label class="md-nav__title" for="__nav_1_2_1_5">
          <span class="md-nav__icon md-icon"></span>
          Geotechnical
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/geotechnical/557-PySimple1/" class="md-nav__link">
        PySimple1

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/geotechnical/565-QzSimple1/" class="md-nav__link">
        QzSimple1

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_1_6" type="checkbox" id="__nav_1_2_1_6" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_1_6">
          Wrappers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Wrappers" data-md-level="4">
        <label class="md-nav__title" for="__nav_1_2_1_6">
          <span class="md-nav__icon md-icon"></span>
          Wrappers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/wrapper/489-Parallel/" class="md-nav__link">
        Parallel

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/uniaxial/wrapper/632-Series/" class="md-nav__link">
        Series

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_2" type="checkbox" id="__nav_1_2_2" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_2">
          Element
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Element" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_2">
          <span class="md-nav__icon md-icon"></span>
          Element
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_2_1" type="checkbox" id="__nav_1_2_2_1" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_2_1">
          Beam
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Beam" data-md-level="4">
        <label class="md-nav__title" for="__nav_1_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          Beam
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/element/beam/2057-Force-Based%20Beam-Column%20Element/" class="md-nav__link">
        Force-Based Beam-Column Element

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/element/beam/2184-Elastic%20Beam%20Column%20Element/" class="md-nav__link">
        ElasticBeamColumn

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_3" type="checkbox" id="__nav_1_2_3" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_3">
          Constraint
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Constraint" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_3">
          <span class="md-nav__icon md-icon"></span>
          Constraint
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/constraints/602-RigidLink/" class="md-nav__link">
        RigidLink

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_4" type="checkbox" id="__nav_1_2_4" >
      
      
      
        
          
        
          
            
          
        
          
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../library/modeling/pattern/plain/">Pattern</a>
          
            <label for="__nav_1_2_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Pattern" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_4">
          <span class="md-nav__icon md-icon"></span>
          Pattern
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/pattern/Multisupport_Excitation/" class="md-nav__link">
        Multisupport Excitation

      </a>
    </li>
  

            
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/pattern/740-Uniform%20Excitation%20Pattern/" class="md-nav__link">
        Uniform Excitation Pattern

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modeling/pattern/" class="md-nav__link">
        Load Patterns

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_3">
          Utilities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Utilities" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          Utilities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/utilities/units/" class="md-nav__link">
        Units
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3_2" type="checkbox" id="__nav_1_3_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_3_2">
          Recorders
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Recorders" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_3_2">
          <span class="md-nav__icon md-icon"></span>
          Recorders
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/utilities/recorders/208-Element%20Recorder/" class="md-nav__link">
        Element

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/utilities/recorders/431-Node%20Recorder/" class="md-nav__link">
        Node

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_4">
          Modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modules" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          Modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4_1" type="checkbox" id="__nav_1_4_1" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_4_1">
          Algebraic Hysteresis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Algebraic Hysteresis" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_4_1">
          <span class="md-nav__icon md-icon"></span>
          Algebraic Hysteresis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modules/AlgebraicHysteresis/backbone/RaynorBackbone/" class="md-nav__link">
        Raynor

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modules/AlgebraicHysteresis/backbone/LinearCappedBackbone/" class="md-nav__link">
        LinearCapped

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modules/AlgebraicHysteresis/backbone/MultilinearBackbone/" class="md-nav__link">
        Multilinear

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modules/AlgebraicHysteresis/backbone/ArctangentBackbone/" class="md-nav__link">
        Arctangent

      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modules/AlgebraicHysteresis/backbone/ManderBackbone/" class="md-nav__link">
        Mander

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4_2" type="checkbox" id="__nav_1_4_2" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_4_2">
          Nonlinear Beam-Column
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Nonlinear Beam-Column" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_4_2">
          <span class="md-nav__icon md-icon"></span>
          Nonlinear Beam-Column
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../library/modules/NonlinearBeamColumn/geometry/370-Linear%20Transformation/" class="md-nav__link">
        Linear

      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="add-a-new-element-c">Add a New Element C++</h1>
<p>
To add a new Element module using the C++ language, the developer must:
</p>
<ol>
<li>
provide a new C++ subclass of the Element class
</li>
<li>
provide an interface function that will be used to parse the input and create the new element.
</li>
</ol>
<p>
Unlike the C and Fortran modules, no information about the state of the model is passed as arguments to the element methods. It is the responsibility of the element to obtain this information using it’s assocaiations.
</p>
<p>
NOTE: This document assumes the reader is familiar with the C++ programming language.
</p>
<h3 id="element_class">
Element Class
</h3>
<p>
The Element class itself is an abstract base class. It inherits from both the DomainComponent class, which is itself a subclass of TaggedObject class and the MovableObject class. The class has a large number of methods defined in the interface, not all these methods need to be included in a new Element class. The following is the minimal interface that should be considered:
</p>
<p>
The Element Class:
</p>
<p>
&lt;source lang=“cpp”&gt; class Element : public DomainComponent { public: Element(int tag, int classTag); virtual ~Element();
</p>
<p>
// initialization virtual int setDomain(Domain *theDomain);
</p>
<p>
// methods dealing with nodes and number of external dof virtual int getNumExternalNodes(void) const =0; virtual const ID &amp;getExternalNodes(void) =0; virtual Node **getNodePtrs(void) =0; virtual int getNumDOF(void) =0;
</p>
<p>
// methods dealing with committed state and update virtual int commitState(void); // called when a converged solution has been obtained for a time step virtual int revertToLastCommit(void) = 0; // called when the soln algorithm has failed to converge to a solution at a time step virtual int revertToStart(void); // called when model is rest to initial conditions virtual int update(void); // called when a new trial step has been set at the nodes
</p>
<p>
// methods dealing with element stiffness virtual const Matrix &amp;getTangentStiff(void) =0; virtual const Matrix &amp;getInitialStiff(void) =0;
</p>
<p>
// methods dealing with element forces virtual void zeroLoad(void); virtual int addLoad(ElementalLoad *theLoad, double loadFactor); virtual const Vector &amp;getResistingForce(void) =0;
</p>
<p>
// public methods for output void Print(OPS_Stream &amp;s, int flag =0); virtual Response *setResponse(const char **argv, int argc, OPS_Stream &amp;theHandler); virtual int getResponse(int responseID, Information &amp;eleInformation);
</p>
<p>
// method for database/parallel processing int sendSelf(int commitTag, Channel &amp;theChannel); int recvSelf(int commitTag, Channel &amp;theChannel, FEM_ObjectBroker &amp;theBroker);
</p>
<p>
}
</p>
<p>
&lt;/source&gt;
</p>
<h3 id="example___truss2d">
Example - Truss2D
</h3>
<p>
In the following section we will provide all necessary code to add a new 2d planar truss element into an OpenSees interpreter. To demonstrate the power of object-oriented programming, the stress-strain relationship will be provided by a UniaxialMaterial object.
</p>
<h4 id="header">
Header
</h4>
<p>
The header for thew new class, which we will call Truss2D is as follows:
</p>
<p>
&lt;source lang=“cpp”&gt; // include directives
</p>
<ol>
<li>
include &lt;Element.h&gt;
</li>
<li>
include &lt;Matrix.h&gt;
</li>
<li>
include &lt;Vector.h&gt;
</li>
</ol>
<p>
// forward declarations class UniaxialMaterial;
</p>
<p>
class Truss2D : public Element { public: // constructors Truss2D(int tag, int Nd1, int Nd2, UniaxialMaterial &amp;theMaterial, double A);
</p>
<p>
Truss2D();
</p>
<p>
// destructor ~Truss2D();
</p>
<p>
// initialization int setDomain(Domain *theDomain);
</p>
<p>
// public methods to obtain inforrmation about dof &amp; connectivity int getNumExternalNodes(void) const; const ID &amp;getExternalNodes(void); Node **getNodePtrs(void); int getNumDOF(void);
</p>
<p>
// public methods to set the state of the element int commitState(void); int revertToLastCommit(void); int revertToStart(void); int update(void);
</p>
<p>
// public methods to obtain stiffness const Matrix &amp;getTangentStiff(void); const Matrix &amp;getInitialStiff(void);
</p>
<p>
// public method to obtain resisting force const Vector &amp;getResistingForce(void);
</p>
<p>
// method for obtaining information specific to an element void Print(OPS_Stream &amp;s, int flag =0); Response *setResponse(const char **argv, int argc, OPS_Stream &amp;s); int getResponse(int responseID, Information &amp;eleInformation);
</p>
<p>
// public methods for database/parallel processing int sendSelf(int commitTag, Channel &amp;theChannel); int recvSelf(int commitTag, Channel &amp;theChannel, FEM_ObjectBroker &amp;theBroker); void Print(OPS_Stream &amp;s, int flag =0);
</p>
<p>
protected:
</p>
<p>
private: // private member functions - only available to objects of the class double computeCurrentStrain(void) const;
</p>
<p>
// private attributes - a copy for each object of the class UniaxialMaterial <em>theMaterial; // pointer to a material ID externalNodes; // contains the id’s of end nodes Matrix trans; // hold the transformation matrix double L; // length of truss (undeformed configuration) double A; // area of truss Node </em>theNodes[2]; // node pointers
</p>
<p>
// static data - single copy for all objects of the class static Matrix trussK; // class wide matrix for returning stiffness static Vector trussR; // class wide vector for returning residual };
</p>
<ol>
<li>
endif
</li>
</ol>
<p>
&lt;/source&gt;
</p>
<p>
The header file defines the interface and variables for the class Truss2D. It defines the new class to be a sublass of the Element class. In the public interface, are two constructors and a destructor in addition to minimal set of methods we showed for the Element class. There are no protected data or methods as we do not expect this class to be subclassed. In the private section, we define one private method, computeCurrentStrain(), and we define a number of private variables and a number of static variables.
</p>
<p>
The header has a number of #include directives, one is needed for the base class and every class used as a variable in the list of data (except those that are used as pointers). For those classes that only appear as pointers in the header file (Node, UniaxialMaterial) a forward declaration is all that is needed (the include could also have been used, but using the forward declaration simplifies dependencies and reduces the amount of code that ha to be recompiled later if changes are made).
</p>
<h4 id="implementation">
Implementation
</h4>
<p>
It another file, Truss2D.cpp, we place the code that details what the constructors, destructor and methods do. In addition we provide one additional procedure OPS_Truss2D() (NOTE it has the same name as the class with an OPS_ prefix). We will go through each part of the file.
</p>
<h5 id="include_directives">
Include Directives
</h5>
<p>
The first part of the file contains the list of includes. It is necessary to have an #include directive for each class and api file that is used within the .cpp file and is not included in the header.
</p>
<p>
&lt;source lang=“cpp”&gt;
</p>
<ol>
<li>
include “Truss2D.h”
</li>
</ol>
<ol>
<li>
include &lt;elementAPI.h&gt;
</li>
<li>
include &lt;G3Globals.h&gt;
</li>
<li>
include &lt;Information.h&gt;
</li>
<li>
include &lt;Domain.h&gt;
</li>
<li>
include &lt;Node.h&gt;
</li>
<li>
include &lt;Channel.h&gt;
</li>
<li>
include &lt;Message.h&gt;
</li>
<li>
include &lt;FEM_ObjectBroker.h&gt;
</li>
<li>
include &lt;UniaxialMaterial.h&gt;
</li>
<li>
include &lt;Renderer.h&gt;
</li>
<li>
include &lt;ElementResponse.h&gt;
</li>
</ol>
<ol>
<li>
include &lt;math.h&gt;
</li>
<li>
include &lt;stdlib.h&gt;
</li>
<li>
include &lt;string.h&gt;
</li>
</ol>
<p>
&lt;/source&gt;
</p>
<h5 id="static_variables">
Static Variables
</h5>
<p>
Next, we initialize the static variables. For this example we are using 2 static-variables (objects shared by each Truss2D object that is created), one to return the tangent matrix and the other to return the resisting force.
</p>
<p>
&lt;source lang=“cpp”&gt; // initialise the class wide variables Matrix Truss2D::trussK(4,4); Vector Truss2D::trussR(4); &lt;/source&gt;
</p>
<h5 id="constructors">
Constructors
</h5>
<p>
After the list of includes, we provide the 2 constructors. The constructors are rather simple. They just initialize all the data variables defined in the header. Note it is very important to set all pointer values to 0.
</p>
<p>
The first constructor is the one most typically used. The arguments provide the elements tag, the tags of the two end nodes, the element’s area and a copy of the element’s material. The code in the constructor does the following:
</p>
<ol>
<li>
The elements tag and a 0 are passed to the Element constructor.
</li>
<li>
The matreial pointer, theMaterial, is set to a copy of the material obtained from the material that is passed in the arguments.
</li>
<li>
The externalNodes array is set to be an array of size 2 and it’s values are set to the nodal tags of the 2 nodes.
</li>
<li>
The theNodes array components are set to be 0.
</li>
</ol>
<p>
It should be noted that the static variables dealing with length, transformations, and nodes are set to 0 in the constructors. They will be filled in when the setDomain() method is invoked on the object.
</p>
<p>
&lt;source lang=“cpp”&gt; Truss2D::Truss2D(int tag, int Nd1, int Nd2, UniaxialMaterial &amp;theMat, double a)
</p>
<dl>
<dt>
</dt>
<dd>
Element(tag, 0),
</dd>
</dl>
<p>
externalNodes(2), trans(1,4), L(0.0), A(a) { // get a copy of the material object for our own use theMaterial = theMat.getCopy(); if (theMaterial == 0) { opserr &lt;&lt; “FATAL TrussCPP::TrussCPP() - out of memory, could not get a copy of the Material”; exit(-1); }
</p>
<p>
// fill in the ID containing external node info with node id’s if (externalNodes.Size() != 2) { opserr &lt;&lt; “FATAL TrussCPP::TrussCPP() - out of memory, could not create an ID of size 2”; exit(-1); }
</p>
<p>
externalNodes(0) = Nd1; externalNodes(1) = Nd2;
</p>
<p>
theNodes[0] = 0; theNodes[1] = 0; } &lt;/source&gt;
</p>
<p>
The second constructor is called when paralell processing or the database feature of the OpenSees application is used. It’s pupose is to create a blank Truss2D object, that will be filled in when the recvSelf() method is invoked on the object.
</p>
<p>
&lt;source lang=“cpp”&gt; Truss2D::Truss2D()
</p>
<dl>
<dt>
</dt>
<dd>
Element(0, 0),
</dd>
</dl>
<p>
theMaterial(0), externalNodes(2), trans(1,4), L(0.0), A(0.0) { theNodes[0] = 0; theNodes[1] = 0; } &lt;/source&gt;
</p>
<h5 id="destructor">
Destructor
</h5>
<p>
The we provide the destructor. In the destructor all memory that the Truss2D created or was passed to it in the constructor must be destroyed. For our example, we need to invoke the destructor on the copy of the material object.
</p>
<p>
&lt;source lang=“cpp”&gt; Truss2D::~Truss2D() { if (theMaterial != 0) delete theMaterial; } &lt;/source&gt;
</p>
<p>
===== setDomain() Initialization Method
</p>
<p>
The setDomain() method is invoked when the truss element is being added to the Domain. It is in this method that most of the private variables of the object are determined. The method returns 0 if successfull, a negative number if not. In the method we obtain pointers to the end nodes, nodal coordinates are obtained and the elements length and transformation matrix is set once the coordinates have been obtained.
</p>
<p>
&lt;source lang=“cpp”&gt; void Truss2D::setDomain(Domain *theDomain) { // check Domain is not null - invoked when object removed from a domain if (theDomain == 0) { return; }
</p>
<p>
// first ensure nodes exist in Domain and set the node pointers Node <em>end1Ptr, </em>end2Ptr; int Nd1 = externalNodes(0); int Nd2 = externalNodes(1); end1Ptr = theDomain-&gt;getNode(Nd1); end2Ptr = theDomain-&gt;getNode(Nd2); if (end1Ptr == 0) { opserr &lt;&lt; “WARNING Truss2D::setDomain() - at truss” &lt;&lt; this-&gt;getTag() &lt;&lt; ” node ” &lt;&lt; Nd1 &lt;&lt; ” does not exist in domain“; return; // don’t go any further - otherwise segemntation fault } if (end2Ptr == 0) { opserr &lt;&lt;”WARNING Truss2D::setDomain() - at truss ” &lt;&lt; this-&gt;getTag() &lt;&lt; ” node ” &lt;&lt; Nd2 &lt;&lt; ” does not exist in domain“; return; // don’t go any further - otherwise segemntation fault } theNodes[0] = end1Ptr; theNodes[1] = end2Ptr; // call the DomainComponent class method THIS IS VERY IMPORTANT this-&gt;DomainComponent::setDomain(theDomain);
</p>
<p>
// ensure connected nodes have correct number of dof’s int dofNd1 = end1Ptr-&gt;getNumberDOF(); int dofNd2 = end2Ptr-&gt;getNumberDOF(); if ((dofNd1 != 2) || (dofNd2 != 2)) { opserr &lt;&lt; “Truss2D::setDomain(): 2 dof required at nodes”; return; }
</p>
<p>
// now determine the length &amp; transformation matrix const Vector &amp;end1Crd = end1Ptr-&gt;getCrds(); const Vector &amp;end2Crd = end2Ptr-&gt;getCrds();
</p>
<p>
double dx = end2Crd(0)-end1Crd(0); double dy = end2Crd(1)-end1Crd(1);
</p>
<p>
L = sqrt(dx<em>dx + dy</em>dy);
</p>
<p>
if (L == 0.0) { opserr &lt;&lt; “WARNING Truss2D::setDomain() - Truss2D” &lt;&lt; this-&gt;getTag() &lt;&lt; ” has zero length“; return; // don’t go any further - otherwise divide by 0 error }
</p>
<p>
double cs = dx/L; double sn = dy/L;
</p>
<p>
trans(0,0) = -cs; trans(0,1) = -sn; trans(0,2) = cs; trans(0,3) = sn; } &lt;/source&gt;
</p>
<h5 id="methods_dealing_with_nodes">
Methods Dealing With Nodes
</h5>
<p>
Next comes 4 rather simple methods that return basic information about the elements nodes. These are one line methods that should not need any explanation! &lt;source lang=“cpp”&gt; int Truss2D::getNumExternalNodes(void) const { return 2; }
</p>
<p>
const ID &amp; Truss2D::getExternalNodes(void) { return externalNodes; }
</p>
<p>
Node ** Truss2D::getNodePtrs(void) { return theNodes; }
</p>
<p>
int Truss2D::getNumDOF(void) { return 4; } &lt;/source&gt;
</p>
<h5 id="methods_dealing_with_current_state">
Methods Dealing With Current State
</h5>
<p>
&lt;source lang=“cpp”&gt; int Truss2D::commitState() { return theMaterial-&gt;commitState(); }
</p>
<p>
int Truss2D::revertToLastCommit() { return theMaterial-&gt;revertToLastCommit(); }
</p>
<p>
int Truss2D::revertToStart() { return theMaterial-&gt;revertToStart(); }
</p>
<p>
int Truss2D::update() { // determine the current strain given trial displacements at nodes double strain = this-&gt;computeCurrentStrain();
</p>
<p>
// set the strain in the materials theMaterial-&gt;setTrialStrain(strain);
</p>
<p>
return 0; } &lt;/source&gt;
</p>
<h5 id="methods_to_return_tangent_matrix">
Methods To Return Tangent Matrix
</h5>
<p>
In both methods, we obtain the appropriate tangent from the material and use this to return the transformed matrix.
</p>
<p>
&lt;source lang=“cpp”&gt; const Matrix &amp; Truss2D::getTangentStiff(void) { if (L == 0.0) { // length = zero - problem in setDomain() warning message already printed trussK.Zero(); return trussK; }
</p>
<p>
// get the current E from the material for the last updated strain double E = theMaterial-&gt;getTangent();
</p>
<p>
// form the tangent stiffness matrix trussK = trans^trans; trussK <em>= A</em>E/L;
</p>
<p>
// return the matrix return trussK; }
</p>
<p>
const Matrix &amp; Truss2D::getInitialStiff(void) { if (L == 0.0) { // length = zero - problem in setDomain() warning message already printed trussK.Zero(); return trussK; }
</p>
<p>
// get the current E from the material for the last updated strain double E = theMaterial-&gt;getInitialTangent();
</p>
<p>
// form the tangent stiffness matrix trussK = trans^trans; trussK <em>= A</em>E/L;
</p>
<p>
// return the matrix return trussK; } &lt;/source&gt;
</p>
<h5 id="methods_to_return_resisting_force">
Methods To Return Resisting Force
</h5>
<p>
In this method we obtain the stress from the material and use this to return the transformed force vector.
</p>
<p>
&lt;source lang=“cpp”&gt; const Vector &amp; Truss2D::getResistingForce() { if (L == 0.0) { // if length == 0, problem in setDomain() trussR.Zero(); return trussR; }
</p>
<p>
// want: R = Ku - Pext
</p>
<p>
// force = F * transformation double force = A<em>theMaterial-&gt;getStress(); for (int i=0; i&lt;4; i++) trussR(i) = trans(0,i)</em>force;
</p>
<p>
return trussR; } &lt;/source&gt;
</p>
<h5 id="methods_dealing_with_output">
Methods Dealing With Output
</h5>
<p>
Information is obtained by the user when the print command is invoked by the user and also when the user issues the recorder command. When the print command is invoked the Print method is invoked. This method simply prints information about the element, and then asks the material to do likewise.
</p>
<p>
&lt;source lang=“cpp”&gt; void Truss2D::Print(OPS_Stream &amp;s, int flag) { s &lt;&lt; “Element:” &lt;&lt; this-&gt;getTag(); s &lt;&lt; ” type: Truss2D iNode: ” &lt;&lt; externalNodes(0); s &lt;&lt; ” jNode: ” &lt;&lt; externalNodes(1); s &lt;&lt; ” Area: ” &lt;&lt; A; s &lt;&lt; ” aterial: ” &lt;&lt; *theMaterial; } &lt;/source&gt;
</p>
<p>
There are two methods used by the element recorders.
</p>
<ol>
<li>
The first method, setResponse(), is called when the recorder is created. The element informs the recorder that it can respond to a request of that type, if it cannot respond to the request it returns a 0, otherwise it returns an Response object. The response object includes a pointer to the element, an integer flag used to id the response when the getResponse() method is called, and a Vector detailing the size of the response.
</li>
<li>
The second method, getReponse(), is called by the recorder when it is actually recording the information.
</li>
</ol>
<p>
&lt;source lang=“cpp”&gt; Response * Truss2D::setResponse(const char **argv, int argc, OPS_Stream &amp;output) { Response *theResponse = 0;
</p>
<p>
output.tag(“ElementOutput”); output.attr(“eleType”,this-&gt;getClassType()); output.attr(“eleTag”,this-&gt;getTag()); int numNodes = this-&gt;getNumExternalNodes(); const ID &amp;nodes = this-&gt;getExternalNodes(); static char nodeData[32];
</p>
<p>
for (int i=0; i&lt;numNodes; i++) { sprintf(nodeData,“node%d”,i+1); output.attr(nodeData,nodes(i)); }
</p>
<p>
if (strcmp(argv[0],“force”) == 0 || strcmp(argv[0],“forces”) == 0 || strcmp(argv[0],“globalForce”) == 0 || strcmp(argv[0],“globalForces”) == 0) { const Vector &amp;force = this-&gt;getResistingForce(); int size = force.Size(); for (int i=0; i&lt;size; i++) { sprintf(nodeData,“P%d”,i+1); output.tag(“ResponseType”,nodeData); } theResponse = new ElementResponse(this, 1, this-&gt;getResistingForce()); }
</p>
<p>
else if (strcmp(argv[0],“dampingForce”) == 0 || strcmp(argv[0],“dampingForces”) == 0) { const Vector &amp;force = this-&gt;getResistingForce(); int size = force.Size(); for (int i=0; i&lt;size; i++) { sprintf(nodeData,“P%d”,i+1); output.tag(“ResponseType”,nodeData); } theResponse = new ElementResponse(this, 2, this-&gt;getResistingForce()); } else if (strcmp(argv[0],“axialForce”) ==0) return new ElementResponse(this, 3, 0.0);
</p>
<p>
output.endTag(); return theResponse; }
</p>
<p>
int Truss2D::getResponse(int responseID, Information &amp;eleInfo) { double strain;
</p>
<p>
switch (responseID) { case -1: return -1; case 1: // global forces return eleInfo.setVector(this-&gt;getResistingForce()); case 2: return eleInfo.setVector(this-&gt;getRayleighDampingForces()); case 3: theMaterial-&gt;setTrialStrain(strain); return eleInfo.setDouble(A * theMaterial-&gt;getStress()); default: return 0; } } &lt;/source&gt;
</p>
<h5 id="methods_dealing_with_databasesparallel_processing">
Methods Dealing With Databases/Parallel Processing
</h5>
<p>
There are two methods provided which are required is the user uses to use the database or parallel procesing features of the OpenSees applications. If neither are to be used, the developer need simply return a negative value in both methods. The idea is that the element must pack up it’s information using Vector and ID objects and send it off to a Channel object. On the flip side, the receiving blank element must receive the same Vector and ID data, unpack it and set the variables.
</p>
<p>
&lt;source lang=“cpp”&gt; int Truss2D::sendSelf(int commitTag, Channel &amp;theChannel) { int res;
</p>
<p>
// note: we don’t check for dataTag == 0 for Element // objects as that is taken care of in a commit by the Domain // object - don’t want to have to do the check if sending data int dataTag = this-&gt;getDbTag();
</p>
<p>
// Truss2D packs it’s data into a Vector and sends this to theChannel // along with it’s dbTag and the commitTag passed in the arguments
</p>
<p>
Vector data(5); data(0) = this-&gt;getTag(); data(1) = A; data(2) = theMaterial-&gt;getClassTag(); int matDbTag = theMaterial-&gt;getDbTag(); // NOTE: we do have to ensure that the material has a database // tag if we are sending to a database channel. if (matDbTag == 0) { matDbTag = theChannel.getDbTag(); if (matDbTag != 0) theMaterial-&gt;setDbTag(matDbTag); } data(3) = matDbTag;
</p>
<p>
res = theChannel.sendVector(dataTag, commitTag, data); if (res &lt; 0) { opserr &lt;&lt; “WARNING Truss2D::sendSelf() - failed to send Vector”; return -1; }
</p>
<p>
// Truss2D then sends the tags of it’s two end nodes res = theChannel.sendID(dataTag, commitTag, externalNodes); if (res &lt; 0) { opserr &lt;&lt; “WARNING Truss2D::sendSelf() - failed to send ID”; return -2; }
</p>
<p>
// finally Truss2D asks it’s material object to send itself res = theMaterial-&gt;sendSelf(commitTag, theChannel); if (res &lt; 0) { opserr &lt;&lt; “WARNING Truss2D::sendSelf() - failed to send the Material”; return -3; }
</p>
<p>
return 0; }
</p>
<p>
int Truss2D::recvSelf(int commitTag, Channel &amp;theChannel, FEM_ObjectBroker &amp;theBroker) { int res; int dataTag = this-&gt;getDbTag();
</p>
<p>
// Truss2D creates a Vector, receives the Vector and then sets the // internal data with the data in the Vector
</p>
<p>
Vector data(5); res = theChannel.recvVector(dataTag, commitTag, data); if (res &lt; 0) { opserr &lt;&lt; “WARNING Truss2D::recvSelf() - failed to receive Vector”; return -1; }
</p>
<p>
this-&gt;setTag((int)data(0)); A = data(1); // Truss2D now receives the tags of it’s two external nodes res = theChannel.recvID(dataTag, commitTag, externalNodes); if (res &lt; 0) { opserr &lt;&lt; “WARNING Truss2D::recvSelf() - failed to receive ID”; return -2; }
</p>
<p>
// we create a material object of the correct type, // sets its database tag and asks this new object to recveive itself. int matClass = data(2); int matDb = data(3);
</p>
<p>
theMaterial = theBroker.getNewUniaxialMaterial(matClass); if (theMaterial == 0) { opserr &lt;&lt; “WARNING Truss2D::recvSelf() - failed to create a Material”; return -3; }
</p>
<p>
// we set the dbTag before we receive the material - this is important theMaterial-&gt;setDbTag(matDb); res = theMaterial-&gt;recvSelf(commitTag, theChannel, theBroker); if (res &lt; 0) { opserr &lt;&lt; “WARNING Truss2D::recvSelf() - failed to receive the Material”; return -3; }
</p>
<p>
return 0; }
</p>


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Berkeley, CA
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.top", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.ed9748b7.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>